<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>EKS Nodegroup IP çš„é…ç™¼åŸç† - weichen's note</title><meta name=Description content="just some tech notes."><script async src="https://www.googletagmanager.com/gtag/js?id=G-4FB17VHDQ7"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4FB17VHDQ7",{anonymize_ip:!1})}</script><meta name=keywords content="aws,eks,k8s"><meta property="og:title" content="EKS Nodegroup IP çš„é…ç™¼åŸç†"><meta property="og:description" content="å‰æƒ…æè¦ å› å…¬å¸å°å…¥ AWS Landing Zone æ¶æ§‹ï¼Œé…ç™¼çš„ VPC æ˜¯ Intranet ç¶²æ®µï¼Œç”¨ä¾†å’Œåœ°ç«¯ä»‹æ¥ (é€é Transit Gateway)ï¼Œå› æ­¤ VPC é…ç™¼çš„ IP æ•¸é‡æ˜¯æœ‰é™çš„ è§€å¯Ÿäº†ä¸€ä¸‹ AWS IP çš„ä½¿ç”¨æƒ…æ³ï¼Œ"><meta property="og:type" content="article"><meta property="og:url" content="https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/"><meta property="og:image" content="https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/featured-image.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-24T20:32:58+08:00"><meta property="article:modified_time" content="2023-05-24T20:32:58+08:00"><meta property="og:site_name" content="weichen's note"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/featured-image.jpg"><meta name=twitter:title content="EKS Nodegroup IP çš„é…ç™¼åŸç†"><meta name=twitter:description content="å‰æƒ…æè¦ å› å…¬å¸å°å…¥ AWS Landing Zone æ¶æ§‹ï¼Œé…ç™¼çš„ VPC æ˜¯ Intranet ç¶²æ®µï¼Œç”¨ä¾†å’Œåœ°ç«¯ä»‹æ¥ (é€é Transit Gateway)ï¼Œå› æ­¤ VPC é…ç™¼çš„ IP æ•¸é‡æ˜¯æœ‰é™çš„ è§€å¯Ÿäº†ä¸€ä¸‹ AWS IP çš„ä½¿ç”¨æƒ…æ³ï¼Œ"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5152060720937345" crossorigin=anonymous></script><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/><link rel=prev href=https://droyuki.github.io/2023/05/ip-calculator/><link rel=next href=https://droyuki.github.io/2023/06/eks-nodegroup-in-private-snet/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"EKS Nodegroup IP çš„é…ç™¼åŸç†","inLanguage":"zh-TW","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/droyuki.github.io\/2023\/05\/eks-nodegroup-ip-allocation\/"},"genre":"posts","keywords":"aws, eks, k8s","wordcount":1507,"url":"https:\/\/droyuki.github.io\/2023\/05\/eks-nodegroup-ip-allocation\/","datePublished":"2023-05-24T20:32:58+08:00","dateModified":"2023-05-24T20:32:58+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"weichen"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="weichen's note">weichen's note</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>æ‰€æœ‰æ–‡ç«  </a><a class=menu-item href=/tags/>æ¨™ç±¤ </a><a class=menu-item href=/categories/>åˆ†é¡ </a><a class=menu-item href=https://github.com/droyuki rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=æœç´¢æ–‡ç« æ¨™é¡Œæˆ–å…§å®¹... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ›ä¸»é¡Œ><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title=é¸æ“‡èªè¨€><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/2023/05/eks-nodegroup-ip-allocation/ selected>ç¹é«”ä¸­æ–‡</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="weichen's note">weichen's note</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=æœç´¢æ–‡ç« æ¨™é¡Œæˆ–å…§å®¹... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></div><a class=menu-item href=/posts/ title>æ‰€æœ‰æ–‡ç« </a><a class=menu-item href=/tags/ title>æ¨™ç±¤</a><a class=menu-item href=/categories/ title>åˆ†é¡</a><a class=menu-item href=https://github.com/droyuki title rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ›ä¸»é¡Œ>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title=é¸æ“‡èªè¨€><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/2023/05/eks-nodegroup-ip-allocation/ selected>ç¹é«”ä¸­æ–‡</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>ç›®éŒ„</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">EKS Nodegroup IP çš„é…ç™¼åŸç†</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>weichen</a></span>&nbsp;<span class=post-category>æ”¶éŒ„æ–¼ <a href=/categories/kubernetes/><i class="far fa-folder fa-fw" aria-hidden=true></i>kubernetes</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-05-24>2023-05-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;ç´„ 1507 å­—&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;é è¨ˆé–±è®€ 4 åˆ†é˜&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>ç›®éŒ„</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#å‰æƒ…æè¦>å‰æƒ…æè¦</a></li><li><a href=#å¾-eks-node-group-ä¸­æŒ‘ä¸€å°-ec2-instance-æŸ¥çœ‹-ip-è³‡è¨Š>å¾ EKS node group ä¸­ï¼ŒæŒ‘ä¸€å° EC2 Instance æŸ¥çœ‹ IP è³‡è¨Š</a><ul><li><a href=#1-é€é-eksctl-æŸ¥çœ‹-node-group-è³‡è¨Š>1. é€é <code>eksctl</code> æŸ¥çœ‹ Node Group è³‡è¨Š</a></li><li><a href=#2-æŸ¥çœ‹-as-group-ä¸­çš„-ec2-è³‡è¨Š>2. æŸ¥çœ‹ AS Group ä¸­çš„ EC2 è³‡è¨Š</a></li><li><a href=#3-æŒ‘å…¶ä¸­ä¸€å°ä¾†æŸ¥çœ‹-ip>3. æŒ‘å…¶ä¸­ä¸€å°ä¾†æŸ¥çœ‹ IP</a></li></ul></li><li><a href=#eks-nodegroup-ip-é…ç™¼æµç¨‹>EKS NodeGroup IP é…ç™¼æµç¨‹</a></li><li><a href=#warm-pool-æ•¸é‡å°æ–¼-eks-çš„å½±éŸ¿>WARM POOL æ•¸é‡å°æ–¼ EKS çš„å½±éŸ¿</a><ul><li><a href=#warm_eni_target-é™¤äº†ä¸»-eniè¦é¡å¤–é ç¶å®šçš„-eni-æ•¸é‡>WARM_ENI_TARGET: é™¤äº†ä¸» ENIï¼Œè¦é¡å¤–é ç¶å®šçš„ ENI æ•¸é‡</a></li><li><a href=#warm_ip_target-eni-ä¸­warm-pool-çš„-ip-æ•¸é‡>WARM_IP_TARGET: ENI ä¸­ï¼Œwarm pool çš„ IP æ•¸é‡</a></li><li><a href=#minimum_ip_target-eni-è¦åˆ†é…çš„æœ€å°‘-ip-æ•¸>MINIMUM_IP_TARGET: ENI è¦åˆ†é…çš„æœ€å°‘ IP æ•¸</a></li></ul></li><li><a href=#çµè«–>çµè«–</a></li><li><a href=#åƒè€ƒè³‡æ–™>åƒè€ƒè³‡æ–™</a></li></ul></nav></div></div><div class=content id=content><h2 id=å‰æƒ…æè¦>å‰æƒ…æè¦</h2><p>å› å…¬å¸å°å…¥ AWS Landing Zone æ¶æ§‹ï¼Œé…ç™¼çš„ VPC æ˜¯ Intranet ç¶²æ®µï¼Œç”¨ä¾†å’Œåœ°ç«¯ä»‹æ¥ (é€é Transit Gateway)ï¼Œå› æ­¤ VPC é…ç™¼çš„ IP æ•¸é‡æ˜¯æœ‰é™çš„</p><p>è§€å¯Ÿäº†ä¸€ä¸‹ AWS IP çš„ä½¿ç”¨æƒ…æ³ï¼Œç™¼ç¾è‡ªå®¶çš„ EKS Node æ˜¯è€—ç”¨ IP çš„ä¸€å¤§å…ƒå…‡ï¼Œä¸€å€‹ Instance å±…ç„¶ç”¨æ‰ 30 å€‹ IP !?</p><p>ç§‰è‘—ç ”ç©¶çš„ç²¾ç¥æŸ¥äº†äº›è³‡æ–™ï¼Œé †æ‰‹è¨˜éŒ„ä¸€ä¸‹ï¼Œè®“æˆ‘å€‘çœ‹ä¸‹å»ã€‚<br></p><h2 id=å¾-eks-node-group-ä¸­æŒ‘ä¸€å°-ec2-instance-æŸ¥çœ‹-ip-è³‡è¨Š>å¾ EKS node group ä¸­ï¼ŒæŒ‘ä¸€å° EC2 Instance æŸ¥çœ‹ IP è³‡è¨Š</h2><h3 id=1-é€é-eksctl-æŸ¥çœ‹-node-group-è³‡è¨Š>1. é€é <code>eksctl</code> æŸ¥çœ‹ Node Group è³‡è¨Š</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>eksctl get nodegroup --cluster &lt;cluster-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># output</span>
</span></span><span class=line><span class=cl>CLUSTER NODEGROUP STATUS CREATED MIN SIZE MAX SIZE DESIRED CAPACITY INSTANCE TYPE IMAGE ID ASG NAME TYPE
</span></span><span class=line><span class=cl>mcloud worker ACTIVE 2023-04-18T06:35:13Z <span class=m>3</span> <span class=m>6</span> <span class=m>4</span> m5a.xlarge AL2_x86_64 eks-worker-xxxx managed
</span></span></code></pre></td></tr></table></div></div><br><h3 id=2-æŸ¥çœ‹-as-group-ä¸­çš„-ec2-è³‡è¨Š>2. æŸ¥çœ‹ AS Group ä¸­çš„ EC2 è³‡è¨Š</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  aws autoscaling describe-auto-scaling-groups --auto-scaling-group-names eks-worker-xxxx --query <span class=s2>&#34;AutoScalingGroups[].Instances&#34;</span>
</span></span></code></pre></td></tr></table></div></div><br><h3 id=3-æŒ‘å…¶ä¸­ä¸€å°ä¾†æŸ¥çœ‹-ip>3. æŒ‘å…¶ä¸­ä¸€å°ä¾†æŸ¥çœ‹ IP</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws ec2 describe-instances --instance-ids i-xxxxx --query <span class=s2>&#34;Reservations[*].Instances[*].NetworkInterfaces[]&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Output:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span><span class=lnt id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a>
</span><span class=lnt id=hl-3-33><a class=lnlinks href=#hl-3-33>33</a>
</span><span class=lnt id=hl-3-34><a class=lnlinks href=#hl-3-34>34</a>
</span><span class=lnt id=hl-3-35><a class=lnlinks href=#hl-3-35>35</a>
</span><span class=lnt id=hl-3-36><a class=lnlinks href=#hl-3-36>36</a>
</span><span class=lnt id=hl-3-37><a class=lnlinks href=#hl-3-37>37</a>
</span><span class=lnt id=hl-3-38><a class=lnlinks href=#hl-3-38>38</a>
</span><span class=lnt id=hl-3-39><a class=lnlinks href=#hl-3-39>39</a>
</span><span class=lnt id=hl-3-40><a class=lnlinks href=#hl-3-40>40</a>
</span><span class=lnt id=hl-3-41><a class=lnlinks href=#hl-3-41>41</a>
</span><span class=lnt id=hl-3-42><a class=lnlinks href=#hl-3-42>42</a>
</span><span class=lnt id=hl-3-43><a class=lnlinks href=#hl-3-43>43</a>
</span><span class=lnt id=hl-3-44><a class=lnlinks href=#hl-3-44>44</a>
</span><span class=lnt id=hl-3-45><a class=lnlinks href=#hl-3-45>45</a>
</span><span class=lnt id=hl-3-46><a class=lnlinks href=#hl-3-46>46</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl> <span class=p>[</span>
</span></span><span class=line><span class=cl>     <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;Attachment&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;AttachTime&#34;</span><span class=p>:</span> <span class=s2>&#34;2023-04-18T06:37:00+00:00&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;AttachmentId&#34;</span><span class=p>:</span> <span class=s2>&#34;eni-attach-xxxxx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;DeleteOnTermination&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;DeviceIndex&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;Status&#34;</span><span class=p>:</span> <span class=s2>&#34;attached&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=nt>&#34;NetworkCardIndex&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>         <span class=p>},</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;Description&#34;</span><span class=p>:</span> <span class=s2>&#34;aws-K8S-i-xxxxxx5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;Groups&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>             <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;GroupName&#34;</span><span class=p>:</span> <span class=s2>&#34;eks-cluster-sg-xxx-1079633432&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;GroupId&#34;</span><span class=p>:</span> <span class=s2>&#34;sg-xxxxxx&#34;</span>
</span></span><span class=line><span class=cl>             <span class=p>}</span>
</span></span><span class=line><span class=cl>         <span class=p>],</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;Ipv6Addresses&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;MacAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;0a:fd:28:xx:xx:xx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;NetworkInterfaceId&#34;</span><span class=p>:</span> <span class=s2>&#34;eni-0cf25d086xxxxxxx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;OwnerId&#34;</span><span class=p>:</span> <span class=s2>&#34;xxxxx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;PrivateDnsName&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-x-x-x.ap-northeast-1.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;PrivateIpAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;10.x.x.x&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>         <span class=nt>&#34;PrivateIpAddresses&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>             <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;Primary&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateDnsName&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-x-x-x.ap-northeast-1.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateIpAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;10.x.x.x&#34;</span>
</span></span><span class=line><span class=cl>             <span class=p>},</span>
</span></span><span class=line><span class=cl>             <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;Primary&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateDnsName&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-x-x-x.ap-northeast-1.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateIpAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;10.x.x.x&#34;</span>
</span></span><span class=line><span class=cl>             <span class=p>},</span>
</span></span><span class=line><span class=cl>             <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;Primary&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateDnsName&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-x-x-x.ap-northeast-1.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateIpAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;10.x.x.x&#34;</span>
</span></span><span class=line><span class=cl>             <span class=p>},</span>
</span></span><span class=line><span class=cl>             <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;Primary&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateDnsName&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-x-x-x.ap-northeast-1.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=nt>&#34;PrivateIpAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;10.x.x.x&#34;</span>
</span></span><span class=line><span class=cl>             <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=err>:</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ Output ä¸­ï¼Œå¯ä»¥çœ‹åˆ° <code>PrivateIpAddresses</code> åˆ—å‡ºäº†æ‰€æœ‰ IPã€‚é€™é‚Šå¯ä»¥è§€å¯Ÿåˆ°ï¼Œå…‰æ˜¯ä¸€å° EC2 Instance å°±ç”¨äº† 30 å€‹ IPã€‚</p><p>ç¥å¥‡&mldr; æ¥è‘—å†ä¾†çœ‹ä¸€ä¸‹ EKS NodeGroup æ˜¯å¦‚ä½•å¾—åˆ° IP å§<style>div.dot-separator{margin:3rem;text-align:center;font-weight:700;font-size:16px}span.dot{&:before { content:"\2022 \00a0\00a0\00a0 \2022 \00a0\00a0\00a0 \2022"; font-size:1.5rem; }}</style><div class=dot-separator><span class=dot></span></div></p><h2 id=eks-nodegroup-ip-é…ç™¼æµç¨‹>EKS NodeGroup IP é…ç™¼æµç¨‹</h2><p>é è¨­ AWS EKS ä½¿ç”¨çš„ CNI æ˜¯å®˜æ–¹çš„ Add-ons <a href=https://docs.aws.amazon.com/eks/latest/userguide/managing-vpc-cni.html target=_blank rel="noopener noreffer">Amazon VPC CNI</a> ï¼Œä¾›è£ EKS æ™‚æœƒè‡ªå‹•å¥—ç”¨ã€‚</p><p>Amazon VPC CNI ä¸­æœ‰å…©å€‹å…ƒä»¶[1]</p><ul><li>CNI Binary</li><li>ipamd</li></ul><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>IP Address Management (IPAM) daemon<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>ipamd çš„å…¨åæ˜¯ IP Address Management (IPAM) daemonï¼Œè² è²¬ IP çš„é…ç™¼ã€‚</div></div></div><p>æ¯æ¬¡ Node Group å»ºå‡ºæ–°çš„ EC2 Instanceï¼Œé è¨­æœƒåœ¨æ‰€å±¬ Subnet ä¸­ç¶å®šä¸€å€‹ <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html target=_blank rel="noopener noreffer">ENI</a>ï¼Œipamd æœƒè² è²¬åœ¨ä¸» ENI é…ç™¼ä¸€å®šæ•¸é‡çš„ IP slot ç”¨ä¾†å¡ä½ï¼Œé€™äº› ENI ä¸Šçš„ç©ºä½å°±æ˜¯ <code>warm pool</code>ï¼Œç­‰è‘—å¾ŒçºŒçš„ IP é…ç™¼ã€‚ (<code>warm</code> çš„æ¦‚å¿µå¾Œé¢æœƒæŒçºŒæåˆ°ï¼Œå…¶å¯¦å°±æ˜¯é é…ç™¼çš„æ„æ€)</p><p>ç•¶ä¸» ENI çš„ IP slot éƒ½è¢«å¡«å…¥ IPï¼Œipamd æœƒå†ç¶å®šæ–°çš„ ENI ã€‚æ­¤æ™‚ ipamd ä¹ŸåŒæ¨£æœƒé…ç™¼ <code>warm pool</code> çµ¦ Secondary ENIã€‚</p><p>ä¾æ­¤é¡æ¨ï¼Œéš¨è‘— Pod çš„æ•¸é‡è¶Šå¤šï¼ŒENI çš„ pool ä¸€ç›´è¢«å¡æ»¿ï¼Œipamd ä¸æ–·åœ°é…æ–°çš„ ENI ï¼Œç›´åˆ° EC2 Instance ä¸èƒ½å†ç¶å®šæ›´å¤š ENI ç‚ºæ­¢ã€‚</p><p>è‡³æ–¼ä¸€å€‹ Instance èƒ½ç¶å¤šå°‘å€‹ ENIã€ä¸€å€‹ ENI èƒ½ç¶å¤šå°‘å€‹ IPï¼Œå‰‡æ˜¯ç”± instance type æ±ºå®š[2]ã€‚</p><p><figure><a class=lightgallery href=https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png title="IP é…ç™¼æµç¨‹" data-thumbnail=https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png data-sub-html="<h2>IP é…ç™¼æµç¨‹</h2><p>IP é…ç™¼æµç¨‹</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png data-srcset="https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png, https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png 1.5x, https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png 2x" data-sizes=auto alt=https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/image.png></a><figcaption class=image-caption>IP é…ç™¼æµç¨‹</figcaption></figure></p><br><h2 id=warm-pool-æ•¸é‡å°æ–¼-eks-çš„å½±éŸ¿>WARM POOL æ•¸é‡å°æ–¼ EKS çš„å½±éŸ¿</h2><p>åœ¨ç¬¦åˆ EC2 Instance è¦æ ¼çš„é™åˆ¶ä¹‹ä¸‹ï¼Œ<code>warm pool</code> æ•¸é‡æ˜¯å¯ä»¥è¢«èª¿æ•´çš„ï¼Œä½¿ç”¨è€…å¯åœ¨ <code>aws-node</code> daemonset ä¸­ï¼Œè—‰ç”±èª¿æ•´ç’°å¢ƒè®Šæ•¸ <code>WARM_ENI_TARGET</code>ã€<code>WARM_IP_TARGET</code>ã€<code>MINIMUM_IP_TARGET</code> ä¾†è¨­å®šã€‚</p><h3 id=warm_eni_target-é™¤äº†ä¸»-eniè¦é¡å¤–é ç¶å®šçš„-eni-æ•¸é‡>WARM_ENI_TARGET: é™¤äº†ä¸» ENIï¼Œè¦é¡å¤–é ç¶å®šçš„ ENI æ•¸é‡</h3><p>æƒ…å¢ƒ: æˆ‘çš„ Instance ç¶å®šäº† 2 å€‹ ENIï¼Œæ¯å€‹ ENI å„æ”¯æ´ 5 å€‹ IP
è‹¥ Node å·²ç¶“ç”¨äº† 5 å€‹ IPï¼Œæ­¤æƒ…æ³ä¸‹è¡¨ç¤ºæœ‰ä¸€å€‹ ENI å·²æ»¿ï¼Œå¦ä¸€å€‹ ENI é‚„æ˜¯ <code>warm</code> çš„ç‹€æ…‹ã€‚</p><p>é€™æ™‚è‹¥æœ‰æ–° Pod è¢«åˆ†é…åˆ°é€™å€‹ Node ï¼Œè¦é…ç™¼çš„æ–° IP æœƒè¢«å¡åˆ°ç¬¬äºŒå€‹ ENI çš„ç©º slot ä¸­ï¼Œé€™æ™‚å€™å°±æ²’æœ‰ä»»ä½• <code>warm</code> ENI äº†ï¼Œ</p><p>ipamd å°±æœƒç¶å®š <code>WARM_ENI_TARGET</code> å€‹ ENI ä½œç‚ºå‚™ç”¨ã€‚</p><h3 id=warm_ip_target-eni-ä¸­warm-pool-çš„-ip-æ•¸é‡>WARM_IP_TARGET: ENI ä¸­ï¼Œwarm pool çš„ IP æ•¸é‡</h3><p>æƒ…å¢ƒ: æˆ‘çš„ Instance ç¶å®š 1 å€‹ ENIï¼Œæ”¯æ´ 20 å€‹ IPï¼Œä¸” WARM_ENI_TARGET=0</p><p>åœ¨ WARM_IP_TARGET=5 çš„æƒ…æ³ä¸‹ï¼Œç•¶é€™å€‹ Node é–‹å§‹è¦æ±‚ç¬¬ 16 å€‹ IP ï¼Œé€™æ™‚è¡¨ç¤º <code>warm</code> IP æ•¸é‡å·²ç¶“å°æ–¼ 5 ï¼Œipamd æœƒå³æ™‚å‘¼å« EC2 API è¦æ±‚ä¸€å€‹æ–°çš„ ENIã€‚</p><p>å¾…æ–°çš„ ENI ç¶å®šå¾Œï¼Œæœƒå¾—åˆ°ä¸€å€‹å…·æœ‰ 20 å€‹ç©ºä½çš„ <code>warm</code> ENIï¼Œä¸€ç›´åˆ°ä¸‹æ¬¡<code>warm</code> ip ä¸å¤ ï¼Œæ‰æœƒå†æ¬¡è¦æ±‚æ–° ENIã€‚</p><h3 id=minimum_ip_target-eni-è¦åˆ†é…çš„æœ€å°‘-ip-æ•¸>MINIMUM_IP_TARGET: ENI è¦åˆ†é…çš„æœ€å°‘ IP æ•¸</h3><p>æƒ…å¢ƒ: æˆ‘çš„ Instance ç¶å®š 1 å€‹ ENIï¼Œæ”¯æ´ 10 å€‹ IP
è‹¥ MINIMUM_IP_TARGET=100ï¼Œipamd æœƒç«‹åˆ»ç¶å®š 9 å€‹ warm ENI (åŠ ä¸ŠåŸæœ¬çš„ 1 å€‹ ENIï¼Œé€™æ¨£ IP ç©ºä½æ‰è¶³å¤  100)</p><style>div.dot-separator{margin:3rem;text-align:center;font-weight:700;font-size:16px}span.dot{&:before { content:"\2022 \00a0\00a0\00a0 \2022 \00a0\00a0\00a0 \2022"; font-size:1.5rem; }}</style><div class=dot-separator><span class=dot></span></div><h2 id=çµè«–>çµè«–</h2><p>EKS ä¸­ï¼ŒPod ä¹Ÿæœƒä½”ç”¨ ENI çš„ IPï¼Œåœ¨è¦åŠƒ Subnet å¤§å°çš„æ™‚å€™éœ€ç‰¹åˆ¥æ³¨æ„</p><p>å¦‚æœ EKS åœ¨ä¸€å€‹å°çš„ subnet ä¸­ä¾›è£ï¼ŒIP æœ‰é™ï¼Œå‰‡å¯é€éèª¿æ•´ <code>WARM_IP_TARGET</code> å’Œ <code>MINIMUM_IP_TARGET</code>ï¼Œç¢ºä¿ Node æœ‰è¶³å¤  IP å¯ç”¨ã€‚</p><p><br>èª¿æ•´è¨­å®šå‰ï¼Œå¿…é ˆå…ˆä¼°è¨ˆå¥½æ‰£é™¤å…¶ä»–æœå‹™ï¼Œæ•´å€‹ Subnet æœ‰å¤šå°‘å‰©é¤˜ IP ä»¥åŠå¤§æ¦‚æ¯å€‹ Node æœƒåŸ·è¡Œå¤šå°‘ Podsï¼Œå¯ä»¥é€éé€™å€‹ <a href=https://aws.github.io/aws-eks-best-practices/networking/subnet-calc/subnet-calc.xlsx target=_blank rel="noopener noreffer">IP è¨ˆç®—æ©Ÿ</a>ï¼Œå®ƒèƒ½æ ¹æ“š EKS Instance type å’Œ Pods æ•¸é‡ç­‰ï¼Œä¼°è¨ˆå‡º EKS IP ä½¿ç”¨æƒ…æ³ã€‚</p><p>ç•¶ç„¶é€™æ˜¯ä»¥ä¸€å€‹ Subnet ä¼°ç®—ï¼Œè‹¥ EKS ä¾›è£åœ¨å¤š AZ æ¶æ§‹ï¼Œå¯ä»¥å†è‡ªè¡Œæ¨ä¼°ä¸€ä¸‹ã€‚</p><p><br>æ•´é«”èª¿æ•´çš„æ–¹å‘å¤§æ¦‚æ˜¯é€™æ¨£:</p><p>å…ˆæŸ¥è©¢ instance type ï¼Œå¾—çŸ¥ ENI å’Œ IP æ•¸é‡ã€‚ä»¥ m5a.xlarge ç‚ºä¾‹ï¼Œå®ƒæ”¯æ´ 4 å€‹ ENI ï¼Œå„ 15 å€‹ IPã€‚</p><p>å¦‚æœä¼°è¨ˆå‡ºçš„ Pod æ•¸ä¸æœƒé€™éº¼å¤šï¼Œå¯ä»¥å°‡ <code>MINIMUM_IP_TARGET</code> èª¿å°ï¼Œè®“å®ƒä¸è¦é å…ˆé…å¥½ 15 å€‹ IP</p><p>ä½† <code>MINIMUM_IP_TARGET</code> å¿…é ˆå¤§æ–¼ä¼°è¨ˆçš„ Pods æ•¸å°±æ˜¯äº†ï¼Œå¦å‰‡æ²’æœ‰æ„ç¾©</p><br><h2 id=åƒè€ƒè³‡æ–™>åƒè€ƒè³‡æ–™</h2><p>[1] <a href=https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/ target=_blank rel="noopener noreffer">https://aws.github.io/aws-eks-best-practices/networking/vpc-cni/</a></p><p>[2] <a href=https://github.com/aws/amazon-vpc-cni-k8s/blob/master/docs/eni-and-ip-target.md target=_blank rel="noopener noreffer">https://github.com/aws/amazon-vpc-cni-k8s/blob/master/docs/eni-and-ip-target.md</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°æ–¼ 2023-05-24</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/ data-title="EKS Nodegroup IP çš„é…ç™¼åŸç†" data-hashtags=aws,eks,k8s><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/ data-hashtag=aws><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Linkedin" data-sharer=linkedin data-url=https://droyuki.github.io/2023/05/eks-nodegroup-ip-allocation/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/aws/>aws</a>,&nbsp;<a href=/tags/eks/>eks</a>,&nbsp;<a href=/tags/k8s/>k8s</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é </a></span></section></div><div class=post-nav><a href=/2023/05/ip-calculator/ class=prev rel=prev title="IP Calculator"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>IP Calculator</a>
<a href=/2023/06/eks-nodegroup-in-private-snet/ class=next rel=next title="é€é Pod SNAT ç¯€çœ EKS IP è³‡æº">é€é Pod SNAT ç¯€çœ EKS IP è³‡æº<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>weichen</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=å›åˆ°é ‚éƒ¨><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è©•è«–><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"è¤‡è£½åˆ°å‰ªè²¼æ¿",maxShownLines:50},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"ğŸ’¬",lightTheme:"github-light",repo:"droyuki/droyuki.github.io"}},lightgallery:!0,search:{algoliaAppID:"",algoliaIndex:"algolia_index",algoliaSearchKey:"algolia_search_only_key",highlightTag:"em",maxResultLength:10,noResultsFound:"æ²’æœ‰æ‰¾åˆ°çµæœ",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4FB17VHDQ7",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-4FB17VHDQ7" async></script></body></html>